(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[948],{2247:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return R}});var o=n(5893),s=n(7294),r=n(5243),i=n.n(r),l=n(5715),a=n(2013),c=n(3049),u=n(2342);n(5254);var d=n(2294),h=n.n(d),p=n(435),m=n(2644),x=n(2546);class g{get sizeAsStyle(){return{height:"".concat(this.height,"px"),width:"".concat(this.width,"px")}}constructor(e){e?(this.height=e.height,this.width=e.width):(this.height=NaN,this.width=NaN)}}let f=e=>{let[t,n]=(0,s.useState)(null),o=()=>{if(e.current){let t=e.current;n(()=>new g({height:t.clientHeight,width:t.clientWidth}))}},r=(0,s.useCallback)(o,[]);return(0,s.useEffect)(()=>(window.addEventListener("resize",r),()=>{window.removeEventListener("resize",r)}),[r]),(0,s.useEffect)(o,[e]),[t,n]};var j=n(9153),w=n(1163);let v=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:500,[n,o]=(0,s.useState)(e),r=(0,s.useRef)(Date.now());return(0,s.useEffect)(()=>{if(Date.now()>=r.current+t)r.current=Date.now(),o(e);else{let n=setTimeout(()=>{r.current=Date.now(),o(e)},t);return()=>clearTimeout(n)}},[e,t]),n};var y=n(9516);let Z=()=>{let e=(0,w.useRouter)(),t=(0,j.Sx)(),[n,r]=(0,s.useState)(t.getCenter()),[i,l]=(0,s.useState)(t.getZoom()),a=v(n),c=v(i);return(0,j.zV)({move(){r(t.getCenter())},zoom(){l(t.getZoom())}}),(0,s.useEffect)(()=>{let e=y.G.on("showOnMap",e=>{t.setView(e.center,e.zoom)});return()=>{e()}},[]),(0,s.useEffect)(()=>{e.push({query:{lat:a.lat.toPrecision(6),lng:a.lng.toPrecision(6),zoom:c.toString()}})},[a,c]),(0,o.jsx)(o.Fragment,{})};var z=n(3835),S=n(577),N=n(3355),C=n(3453),T=n(1400),b=n(1676),D=n(3680);let E=e=>{let{editTodo:t,onCancel:n,onSave:r}=e,[i,l]=(0,s.useState)(!0),[a,c]=(0,s.useState)(t),u=e=>{null!==a&&e.title&&e.description&&i?l(()=>!1):i||null!==e&&e.title.length&&e.description.length||l(()=>!0)},d=e=>{let t=e.target,n=new C.z({...a,description:t.value});c(n),u(n)},h=e=>{let t=e.target,n=new C.z({...a,title:t.value});c(n),u(n)},p=()=>{r(a)};return(0,o.jsxs)(T.Z,{show:null!==t,onHide:n,animation:!1,children:[(0,o.jsx)(T.Z.Header,{closeButton:!0,children:(0,o.jsx)(T.Z.Title,{children:"Creating new todo"})}),(0,o.jsxs)(T.Z.Body,{children:[(0,o.jsxs)(b.Z.Group,{className:"mb-3",controlId:"formTitle",children:[(0,o.jsx)(b.Z.Label,{children:"Todo's Title"}),(0,o.jsx)(b.Z.Control,{type:"text",placeholder:"Title",value:a.title,onInput:h}),(0,o.jsx)(b.Z.Text,{className:"text-muted"})]}),(0,o.jsxs)(b.Z.Group,{className:"mb-3",controlId:"formDescription",children:[(0,o.jsx)(b.Z.Label,{children:"Todo's Description"}),(0,o.jsx)(b.Z.Control,{value:a.description,as:"textarea",type:"text",onInput:d,placeholder:"Description"}),(0,o.jsx)(b.Z.Text,{className:"text-muted"})]})]}),(0,o.jsxs)(T.Z.Footer,{children:[(0,o.jsx)(D.Z,{variant:"secondary",onClick:n,children:"Close"}),(0,o.jsx)(D.Z,{variant:"primary",onClick:p,disabled:i,children:"Save ToDo"})]})]})};var k=n(9296),I=n(828);let _=(0,I.Pi)(()=>{let e=(0,k.l)(),[t,n]=(0,s.useState)(null),r=()=>{n(null)},i=t=>{t.creationDate=new Date,e.todos.addToDo(t),n(()=>null)};return(0,j.zV)({contextmenu(e){n(new C.z({point:new N.E(e.latlng)}))}}),(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(u.et.Overlay,{checked:!0,name:"completed todo's",children:(0,o.jsx)(z.e,{children:e.todos.list.filter(e=>e.completed).map((e,t)=>(0,o.jsx)(S.J,{position:e.point},t))})}),(0,o.jsx)(u.et.Overlay,{checked:!0,name:"pending todo's",children:(0,o.jsx)(z.e,{children:e.todos.list.filter(e=>!e.completed).map((e,t)=>(0,o.jsx)(S.J,{position:e.point},t))})}),t&&(0,o.jsx)(E,{editTodo:t,onCancel:r,onSave:i})]})}),q=()=>{let[e,t]=(0,s.useState)(!1),[n,r]=(0,s.useState)(!1),[d,g]=(0,s.useState)([51.505,-.09]),[j,v]=(0,s.useState)(13),y=(0,s.useRef)(null),[z]=f(y),S=(0,w.useRouter)();return(0,s.useEffect)(()=>{z&&z.width&&z.height&&t(()=>!0)},[z]),(0,s.useEffect)(()=>{if(async function(){i().Icon.Default.mergeOptions({iconRetinaUrl:p.Z.src,iconUrl:m.Z.src,shadowUrl:x.Z.src}),i().control.zoom({position:"bottomright"})}(),S.isReady&&S.query&&!n){let e=parseFloat(S.query.lat),t=parseFloat(S.query.lng);if(S.query.zoom){let o=parseInt(S.query.zoom,10);isNaN(o)||v(o)}g([isNaN(e)?d[0]:e,isNaN(t)?d[1]:t]),r(()=>!0)}}),(0,o.jsx)("div",{ref:y,className:h()["map-container"],children:e&&n?(0,o.jsxs)(l.h,{center:d,zoom:j,style:z?z.sizeAsStyle:{},zoomControl:!1,children:[(0,o.jsx)(a.I,{attribution:'\xa9 <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),(0,o.jsx)(c.L,{position:"bottomright"}),(0,o.jsx)(Z,{}),(0,o.jsx)(u.et,{position:"topright",children:(0,o.jsx)(_,{})})]}):""})};var R=q},2294:function(e){e.exports={"map-container":"Map_map-container__Hggmf"}}}]);