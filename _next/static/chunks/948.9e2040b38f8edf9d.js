(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[948],{2247:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return R}});var s=n(5893),o=n(7294),r=n(5243),i=n.n(r),l=n(5715),a=n(2013),c=n(3049),u=n(2342);n(5254);var d=n(2294),h=n.n(d),p=n(435),m=n(2644),x=n(2546);class g{get sizeAsStyle(){return{height:"".concat(this.height,"px"),width:"".concat(this.width,"px")}}constructor(e){e?(this.height=e.height,this.width=e.width):(this.height=NaN,this.width=NaN)}}let f=e=>{let[t,n]=(0,o.useState)(null),s=()=>{if(e.current){let t=e.current;n(()=>new g({height:t.clientHeight,width:t.clientWidth}))}},r=(0,o.useCallback)(s,[]);return(0,o.useEffect)(()=>(window.addEventListener("resize",r),()=>{window.removeEventListener("resize",r)}),[r]),(0,o.useEffect)(s,[e]),[t,n]};var j=n(9153),w=n(1163);let v=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:500,[n,s]=(0,o.useState)(e),r=(0,o.useRef)(Date.now());return(0,o.useEffect)(()=>{if(Date.now()>=r.current+t)r.current=Date.now(),s(e);else{let n=setTimeout(()=>{r.current=Date.now(),s(e)},t);return()=>clearTimeout(n)}},[e,t]),n};var y=n(9516);let Z=()=>{let e=(0,w.useRouter)(),t=(0,j.Sx)(),[n,r]=(0,o.useState)(t.getCenter()),[i,l]=(0,o.useState)(t.getZoom()),a=v(n),c=v(i);return(0,j.zV)({move(){r(t.getCenter())},zoom(){l(t.getZoom())}}),(0,o.useEffect)(()=>{let e=y.G.on("showOnMap",e=>{t.setView(e.center,e.zoom)});return()=>{e()}},[]),(0,o.useEffect)(()=>{e.push({query:{lat:a.lat.toPrecision(6),lng:a.lng.toPrecision(6),zoom:c.toString()}})},[a,c]),(0,s.jsx)(s.Fragment,{})};var z=n(3835),S=n(577),N=n(3355),b=n(3453),C=n(1400),E=n(1676),D=n(3680);let k=e=>{let{editTodo:t,onCancel:n,onSave:r}=e,[i,l]=(0,o.useState)(!0),[a,c]=(0,o.useState)(t),u=e=>{null!==a&&e.title&&e.description&&i?l(()=>!1):i||null!==e&&e.title.length&&e.description.length||l(()=>!0)},d=e=>{let t=e.target,n=new b.z({...a,description:t.value});c(n),u(n)},h=e=>{let t=e.target,n=new b.z({...a,title:t.value});c(n),u(n)},p=()=>{r(a)};return(0,s.jsxs)(C.Z,{show:null!==t,onHide:n,animation:!1,children:[(0,s.jsx)(C.Z.Header,{closeButton:!0,children:(0,s.jsx)(C.Z.Title,{children:"Adding a new task"})}),(0,s.jsxs)(C.Z.Body,{children:[(0,s.jsxs)(E.Z.Group,{className:"mb-3",controlId:"formTitle",children:[(0,s.jsx)(E.Z.Label,{children:"Title"}),(0,s.jsx)(E.Z.Control,{type:"text",placeholder:"Title",value:a.title,onInput:h}),(0,s.jsx)(E.Z.Text,{className:"text-muted"})]}),(0,s.jsxs)(E.Z.Group,{className:"mb-3",controlId:"formDescription",children:[(0,s.jsx)(E.Z.Label,{children:"Description"}),(0,s.jsx)(E.Z.Control,{value:a.description,as:"textarea",type:"text",onInput:d,placeholder:"Description"}),(0,s.jsx)(E.Z.Text,{className:"text-muted"})]})]}),(0,s.jsxs)(C.Z.Footer,{children:[(0,s.jsx)(D.Z,{variant:"secondary",onClick:n,children:"Close"}),(0,s.jsx)(D.Z,{variant:"primary",onClick:p,disabled:i,children:"Save"})]})]})};var T=n(9296),I=n(828);let _=(0,I.Pi)(()=>{let e=(0,T.l)(),[t,n]=(0,o.useState)(null),r=()=>{n(null)},i=t=>{t.creationDate=new Date,e.todos.addToDo(t),n(()=>null)};return(0,j.zV)({contextmenu(e){n(new b.z({point:new N.E(e.latlng)}))}}),(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(u.et.Overlay,{checked:!0,name:"completed todo's",children:(0,s.jsx)(z.e,{children:e.todos.list.filter(e=>e.completed).map((e,t)=>(0,s.jsx)(S.J,{position:e.point},t))})}),(0,s.jsx)(u.et.Overlay,{checked:!0,name:"pending todo's",children:(0,s.jsx)(z.e,{children:e.todos.list.filter(e=>!e.completed).map((e,t)=>(0,s.jsx)(S.J,{position:e.point},t))})}),t&&(0,s.jsx)(k,{editTodo:t,onCancel:r,onSave:i})]})}),q=()=>{let[e,t]=(0,o.useState)(!1),[n,r]=(0,o.useState)(!1),[d,g]=(0,o.useState)([51.505,-.09]),[j,v]=(0,o.useState)(13),y=(0,o.useRef)(null),[z]=f(y),S=(0,w.useRouter)();return(0,o.useEffect)(()=>{z&&z.width&&z.height&&t(()=>!0)},[z]),(0,o.useEffect)(()=>{if(async function(){i().Icon.Default.mergeOptions({iconRetinaUrl:p.Z.src,iconUrl:m.Z.src,shadowUrl:x.Z.src}),i().control.zoom({position:"bottomright"})}(),S.isReady&&S.query&&!n){let e=parseFloat(S.query.lat),t=parseFloat(S.query.lng);if(S.query.zoom){let s=parseInt(S.query.zoom,10);isNaN(s)||v(s)}g([isNaN(e)?d[0]:e,isNaN(t)?d[1]:t]),r(()=>!0)}}),(0,s.jsx)("div",{ref:y,className:h()["map-container"],children:e&&n?(0,s.jsxs)(l.h,{center:d,zoom:j,style:z?z.sizeAsStyle:{},zoomControl:!1,children:[(0,s.jsx)(a.I,{attribution:'\xa9 <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),(0,s.jsx)(c.L,{position:"bottomright"}),(0,s.jsx)(Z,{}),(0,s.jsx)(u.et,{position:"topright",children:(0,s.jsx)(_,{})})]}):""})};var R=q},2294:function(e){e.exports={"map-container":"Map_map-container__Hggmf"}}}]);